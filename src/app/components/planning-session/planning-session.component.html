<div style="width: 100%; height: 100%;">
    <div *ngIf="!inSession">
        <label for="username">User Id:</label><input id="planning_username" name="username" type="text"
                                                     [(ngModel)]="username"
                                                     style="width: 200px;margin-left: 20px;"> <br>
        <div class="group">
            <button id="new_planning_session" (click)="createSession()">Create new session</button>
            <br>
        </div>
        <div class="group">
            <label for="sessionId">Session Id:</label><input id="planning_session_id" name="sessionId" type="text"
                                                             [(ngModel)]="sessionId"
                                                             style="width: 200px;margin-left: 20px;"><br/>
            <button id="join_planning_session" (click)="joinSession()">Join existing session</button>
        </div>
    </div>
    <div *ngIf="inSession" style="height: 100%;">
        <div class="p-grid" style="height: 100%;">
            <div id="userPanel" class="p-col-2 user-panel">Users: <br>
                <ul>
                    <li *ngFor="let user of users">
                        <span>{{user.username}}
                            <i [ngClass]="{'pi pi-check' :  user.vote && phase === 'voting' }"></i>
                            <i *ngIf="user.vote && phase === 'showResults'">( {{user.vote}} )</i>
                        </span>
                    </li>
                </ul>
            </div>
            <div id="planningMainpanel" class="p-col-8 mainPanel">
                <div *ngIf="phase==='voting'">
                    <div class="card-panel">
                        <app-cards-view [cardNumbers]="cardNumbers"
                                        (cardSelectedEvent)="cardSelected($event)"></app-cards-view>
                    </div>
                </div>
                <div class="result-panel" *ngIf="phase==='showResults'">
                    <app-result-view [users]="users" [choices]="cardNumbers" [colors]="chartColors"></app-result-view>
                </div>
            </div>

            <div class="p-col-2"
                 style="height: 100%; display: flex; flex-direction: column; justify-content: flex-start; margin-bottom: 20px;">
                <div id="controlePanel" (click)="onClickCopy($event)">
                    <p-toast key="myKey1"></p-toast>
                    <div>
                        <label>Session: <span>{{sessionId}}</span></label><br/>
                        <label>(click to copy)</label><br/>
                        <label>User: {{username}} ({{userId}})</label><br/>
                    </div>
                    <button *ngIf="myRole==='ScrumMaster'" pButton type="button" label="{{switchPhase}}"
                            (click)="switchPhaseHandler()"></button>
                </div>
                <div id="messagePanel" style="flex-grow: 1; border: 1px solid black; padding:4px;">
                    <app-messages-view [messageReceived]="newMessage"
                                       (messageEntered)="addMessage($event)"></app-messages-view>
                </div>
            </div>
        </div>
    </div>
    <p-scrollPanel class="footer">
        <p>{{status}}</p>
    </p-scrollPanel>
</div>

